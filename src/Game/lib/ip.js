
import img1_0 from '../imgs/ip/-1#0/0.png';
import img1_1 from '../imgs/ip/-1#0/1.png';
import img1_2 from '../imgs/ip/-1#0/2.png';
import img1_3 from '../imgs/ip/-1#0/3.png';
import img1_4 from '../imgs/ip/-1#0/4.png';
import img1_5 from '../imgs/ip/-1#0/5.png';
import img1_6 from '../imgs/ip/-1#0/6.png';
import img1_7 from '../imgs/ip/-1#0/7.png';
import img1_8 from '../imgs/ip/-1#0/8.png';
import img1_9 from '../imgs/ip/-1#0/9.png';
import img1_10 from '../imgs/ip/-1#0/10.png';
import img1_11 from '../imgs/ip/-1#0/11.png';
import img1_12 from '../imgs/ip/-1#0/12.png';
import img1_13 from '../imgs/ip/-1#0/13.png';
import img1_14 from '../imgs/ip/-1#0/14.png';
import img1_15 from '../imgs/ip/-1#0/15.png';

import img2_0 from '../imgs/ip/1#0/0.png';
import img2_1 from '../imgs/ip/1#0/1.png';
import img2_2 from '../imgs/ip/1#0/2.png';
import img2_3 from '../imgs/ip/1#0/3.png';
import img2_4 from '../imgs/ip/1#0/4.png';
import img2_5 from '../imgs/ip/1#0/5.png';
import img2_6 from '../imgs/ip/1#0/6.png';
import img2_7 from '../imgs/ip/1#0/7.png';
import img2_8 from '../imgs/ip/1#0/8.png';
import img2_9 from '../imgs/ip/1#0/9.png';
import img2_10 from '../imgs/ip/1#0/10.png';
import img2_11 from '../imgs/ip/1#0/11.png';
import img2_12 from '../imgs/ip/1#0/12.png';
import img2_13 from '../imgs/ip/1#0/13.png';
import img2_14 from '../imgs/ip/1#0/14.png';
import img2_15 from '../imgs/ip/1#0/15.png';

import img3_0 from '../imgs/ip/0#1/0.png';
import img3_1 from '../imgs/ip/0#1/1.png';
import img3_2 from '../imgs/ip/0#1/2.png';
import img3_3 from '../imgs/ip/0#1/3.png';
import img3_4 from '../imgs/ip/0#1/4.png';
import img3_5 from '../imgs/ip/0#1/5.png';
import img3_6 from '../imgs/ip/0#1/6.png';
import img3_7 from '../imgs/ip/0#1/7.png';
import img3_8 from '../imgs/ip/0#1/8.png';
import img3_9 from '../imgs/ip/0#1/9.png';
import img3_10 from '../imgs/ip/0#1/10.png';
import img3_11 from '../imgs/ip/0#1/11.png';
import img3_12 from '../imgs/ip/0#1/12.png';
import img3_13 from '../imgs/ip/0#1/13.png';
import img3_14 from '../imgs/ip/0#1/14.png';
import img3_15 from '../imgs/ip/0#1/15.png';

import img4_0 from '../imgs/ip/0#-1/0.png';
import img4_1 from '../imgs/ip/0#-1/1.png';
import img4_2 from '../imgs/ip/0#-1/2.png';
import img4_3 from '../imgs/ip/0#-1/3.png';
import img4_4 from '../imgs/ip/0#-1/4.png';
import img4_5 from '../imgs/ip/0#-1/5.png';
import img4_6 from '../imgs/ip/0#-1/6.png';
import img4_7 from '../imgs/ip/0#-1/7.png';
import img4_8 from '../imgs/ip/0#-1/8.png';
import img4_9 from '../imgs/ip/0#-1/9.png';
import img4_10 from '../imgs/ip/0#-1/10.png';
import img4_11 from '../imgs/ip/0#-1/11.png';
import img4_12 from '../imgs/ip/0#-1/12.png';
import img4_13 from '../imgs/ip/0#-1/13.png';
import img4_14 from '../imgs/ip/0#-1/14.png';
import img4_15 from '../imgs/ip/0#-1/15.png';

// 跳的素材
import imgjump1_0 from '../imgs/ip/jump/-1#0/0.png';
import imgjump1_1 from '../imgs/ip/jump/-1#0/1.png';
import imgjump1_2 from '../imgs/ip/jump/-1#0/2.png';
import imgjump1_3 from '../imgs/ip/jump/-1#0/3.png';
import imgjump1_4 from '../imgs/ip/jump/-1#0/4.png';
import imgjump1_5 from '../imgs/ip/jump/-1#0/5.png';
import imgjump1_6 from '../imgs/ip/jump/-1#0/6.png';
import imgjump1_7 from '../imgs/ip/jump/-1#0/7.png';
import imgjump1_8 from '../imgs/ip/jump/-1#0/8.png';
import imgjump1_9 from '../imgs/ip/jump/-1#0/9.png';
import imgjump1_10 from '../imgs/ip/jump/-1#0/10.png';
import imgjump1_11 from '../imgs/ip/jump/-1#0/11.png';
import imgjump1_12 from '../imgs/ip/jump/-1#0/12.png';
import imgjump1_13 from '../imgs/ip/jump/-1#0/13.png';
import imgjump1_14 from '../imgs/ip/jump/-1#0/14.png';
import imgjump1_15 from '../imgs/ip/jump/-1#0/15.png';

import imgjump2_0 from '../imgs/ip/jump/1#0/0.png';
import imgjump2_1 from '../imgs/ip/jump/1#0/1.png';
import imgjump2_2 from '../imgs/ip/jump/1#0/2.png';
import imgjump2_3 from '../imgs/ip/jump/1#0/3.png';
import imgjump2_4 from '../imgs/ip/jump/1#0/4.png';
import imgjump2_5 from '../imgs/ip/jump/1#0/5.png';
import imgjump2_6 from '../imgs/ip/jump/1#0/6.png';
import imgjump2_7 from '../imgs/ip/jump/1#0/7.png';
import imgjump2_8 from '../imgs/ip/jump/1#0/8.png';
import imgjump2_9 from '../imgs/ip/jump/1#0/9.png';
import imgjump2_10 from '../imgs/ip/jump/1#0/10.png';
import imgjump2_11 from '../imgs/ip/jump/1#0/11.png';
import imgjump2_12 from '../imgs/ip/jump/1#0/12.png';
import imgjump2_13 from '../imgs/ip/jump/1#0/13.png';
import imgjump2_14 from '../imgs/ip/jump/1#0/14.png';
import imgjump2_15 from '../imgs/ip/jump/1#0/15.png';

import imgjump3_0 from '../imgs/ip/jump/0#1/0.png';
import imgjump3_1 from '../imgs/ip/jump/0#1/1.png';
import imgjump3_2 from '../imgs/ip/jump/0#1/2.png';
import imgjump3_3 from '../imgs/ip/jump/0#1/3.png';
import imgjump3_4 from '../imgs/ip/jump/0#1/4.png';
import imgjump3_5 from '../imgs/ip/jump/0#1/5.png';
import imgjump3_6 from '../imgs/ip/jump/0#1/6.png';
import imgjump3_7 from '../imgs/ip/jump/0#1/7.png';
import imgjump3_8 from '../imgs/ip/jump/0#1/8.png';
import imgjump3_9 from '../imgs/ip/jump/0#1/9.png';
import imgjump3_10 from '../imgs/ip/jump/0#1/10.png';
import imgjump3_11 from '../imgs/ip/jump/0#1/11.png';
import imgjump3_12 from '../imgs/ip/jump/0#1/12.png';
import imgjump3_13 from '../imgs/ip/jump/0#1/13.png';
import imgjump3_14 from '../imgs/ip/jump/0#1/14.png';
import imgjump3_15 from '../imgs/ip/jump/0#1/15.png';

import imgjump4_0 from '../imgs/ip/jump/0#-1/0.png';
import imgjump4_1 from '../imgs/ip/jump/0#-1/1.png';
import imgjump4_2 from '../imgs/ip/jump/0#-1/2.png';
import imgjump4_3 from '../imgs/ip/jump/0#-1/3.png';
import imgjump4_4 from '../imgs/ip/jump/0#-1/4.png';
import imgjump4_5 from '../imgs/ip/jump/0#-1/5.png';
import imgjump4_6 from '../imgs/ip/jump/0#-1/6.png';
import imgjump4_7 from '../imgs/ip/jump/0#-1/7.png';
import imgjump4_8 from '../imgs/ip/jump/0#-1/8.png';
import imgjump4_9 from '../imgs/ip/jump/0#-1/9.png';
import imgjump4_10 from '../imgs/ip/jump/0#-1/10.png';
import imgjump4_11 from '../imgs/ip/jump/0#-1/11.png';
import imgjump4_12 from '../imgs/ip/jump/0#-1/12.png';
import imgjump4_13 from '../imgs/ip/jump/0#-1/13.png';
import imgjump4_14 from '../imgs/ip/jump/0#-1/14.png';
import imgjump4_15 from '../imgs/ip/jump/0#-1/15.png';

import imgShadow from '../imgs/ip/shadow/ip_shadow.png';
import imgShadowWrong from '../imgs/ip/shadow/ip_shadow_wrong.png';

import TWEEN from '@tweenjs/tween.js';

class Ip{
    constructor(){
        this.directionMap=['-1#0', '0#1', '1#0', '0#-1'];
        this.direction=[1,0];
        this.allImgs = {
            '-1#0': [img1_0, img1_1, img1_2, img1_3, img1_4, img1_5, img1_6, img1_7, img1_8, img1_9, img1_10, img1_11, img1_12, img1_13, img1_14, img1_15],
            '0#1': [img3_0, img3_1, img3_2, img3_3, img3_4, img3_5, img3_6, img3_7, img3_8, img3_9, img3_10, img3_11, img3_12, img3_13, img3_14, img3_15],
            '1#0': [img2_0, img2_1, img2_2, img2_3, img2_4, img2_5, img2_6, img2_7, img2_8, img2_9, img2_10, img2_11, img2_12, img2_13, img2_14, img2_15],
            '0#-1': [img4_0, img4_1, img4_2, img4_3, img4_4, img4_5, img4_6, img4_7, img4_8, img4_9, img4_10, img4_11, img4_12, img4_13, img4_14, img4_15],
          };
        
         //默认是指精灵浮动
        this.mode='float'
        this.loopIndex=0
        
        //游戏共通的时间
        this.tween=null
        this.floatRunFn=()=>{}

    }

    getAllImgs(){
        let imgs=[]
        Object.values(this.allImgs).forEach(item=>{
            imgs=imgs.concat(item)
        })
        return imgs
    }

    // 图片在不断的通过 loopIndex 在切换，获取当前对应的图
    getCurrentImg(){
        // 选择该向量方向的图片加载
        const key=this.direction.join('#')

        if(this.mode==='float'){
            return this.allImgs[key][this.loopIndex]
        }
    }

    //设置sprite的方向
    setDirection(direction){
        this.direction=direction
        // after justifying the direction ,reset the pic
        this.loopIndex=0
    }

    //判断Ip 需要执行的动作
    setMode(mode,func,time){

        if(mode==='float'){
            this.startFloat(func)
        }
        if(mode==='jump'){
            this.startJump(func,time)
        }
    }

    
    startFloat(func=this.floatRunFn,time){
        let that=this
        //由于在下面的tween 箭头函数中中，this 指针不是原对象了
        this.floatRunFn=func
        this.tween=new TWEEN.Tween({x:0})
          .to({x:959},time)
          .easing(TWEEN.Easing.Linear.None)
          .onUpdate(coords=>{
              console.log('this',coords)
              that.loopIndex=Math.floor(coords.x/60)
              let url=that.getCurrentImg()
            //   this.floatRunFn(url)
              this.floatRunFn(url)
          })
          .repeat(Infinity)

        this.tween.start()
    }


}

export default new Ip()